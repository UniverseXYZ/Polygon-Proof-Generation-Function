# Polygon Proof Generation Cloud Function
  ## Overview
  - This is a cloud function that generates a proof of a `burn` transacation that has happened on Polygon chain
  - It's used for the Polygon bridge for the polymorphs and the faces when bridging from `Polygon` -> `Ethereum`
  - The proof (if ready) is an input to the third and last step to regain access of your tokens on `Ethereum`
  
  ## Install
  - `cd functions/`
  - `npm install`
  - `npm run serve`

  ## How to use ?
  ### **Example query**
  ```bash
    curl --location --request GET 'http://localhost:5001/polymorphmetadata/us-central1/getTransferProof?tokenIds=19&morph=1'
  ```
  - `tokensIds` A comma separated string consisting of the token IDs that need to be checked for a ready proof
    - Note: All of the tokens need to be from the same burn transaction!
  - `morph` The type of the token: `0` for Polymorph(s) and `1` for face(s)
  ### **Example response**

```json
    {
      "transferStatus": {
          "validIds": true,
          "isCheckPointed": true,
          "proof": "0xf910f4842dbed0c0b901400aa0da3e256e4a0d19fcecea3ef4604228681323290e0b926fed700f29d142e8af8ad983be8aa80b3b45d6ac4dae375a07fe751e4da3ef71cdcd31fd190ef75f1f34ba5f78914e8373fa07934c511e7945a1b6c524dd7d050180f62a7d750ddabe53a201790b13390f819e95feeaec5c10295460321f62ebd7a5e9bfb821e00704137bd947a97fd194a80fb4a2017ac899e677ec9d1749afde1fc12ba7236c73c681bde2662a46b4dd7d0b086b533f7b5d2869c21c73f0132ebb28ebe41e6b1744f7f229c9b1a9baa8dd059f9681472d73f4f3d68056791c31b9841b8e8442678353c3dbf64dec0ee9e062c1f6156b56036313cedbe9aee1d17543fef98883009867cc5f7f196b93bae1e27e6320742445d290f2263827498b54fec539f756af727d5b3acebcee8157e68f34916576045e15ac35ed24182081b7358c907ed88d8401a7545d8463049d27a039af5fa644fa6809d18a9e84dcbaee9dbd344e15541b6a441fefd8c6735d1daba0f610c28be17e687fd188205a4a1e6d4f5af1189e5705e2d5fc5f9bf546364c13b9072302f9071f018313ba70b9010000000100000000000000000000000000000000000000000000000000000000000000000000000200001000000000000000008000000000000000100002340000000000000000000000000008000000840000002000040000000100000000004000000000020000000000000000000800000000000040000080000010000000000000000000000000000000000000000000002000000080000400000000000040220000000100000000000000000000000000002000000000000000000000004000000002000000000401000000000000000000000000000000500040000060000010000000000000000010000000000000000000000000000000000020100000f90614f89c94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f884a042ef856c2602f37ce625d252830bed486c5c8e9a4de8aa36cc3d15f304eb662ba0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000180f8db94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f842a08c0bdd7bca83c4e0c810cbecf44bc544a9dc0b9f265664e31ce0ce85f07a052ba00000000000000000000000000000000000000000000000000000000000000001b88020d6874f78811219513411f98b112321c80322dcfa8218834d7a613b233d411220d6874f78811219513411f98b112321c80322dcfa8218834d7a613b233d411200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002f89c94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f884a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000180f89c94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f884a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000180f9021a940f6c05bbc7a40cf093cd01eb615ecf1b84253d0be1a08c5261668696ce22758910d05bab8f186d6eb247ceac2af2e82c7dc17669b036b901e0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248b00000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120d6874f78811219513411f98b112321c80322dcfa8218834d7a613b233d41120000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001f9013d940000000000000000000000000000000000001010f884a04dfe1bbbcf077ddc3e01291eea2d5c70c2b422b415d95645b9adcfd678cb1d63a00000000000000000000000000000000000000000000000000000000000001010a0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba0000000000000000000000000be188d6641e8b680743a4815dfa0f6208038960fb8a00000000000000000000000000000000000000000000000000009aacbc81255b50000000000000000000000000000000000000000000000000ec2d882527e66db00000000000000000000000000000000000000000000241462257002d4f20ebf0000000000000000000000000000000000000000000000000eb92db68a6c1126000000000000000000000000000000000000000000002414622f1ace9d046474b90833f90830f851a02ce9d266ca4541f4a5c587aa7ef20400528623562f68f6d01cf5d4b938bed9e980808080808080a033ae1492ce78ec7de39d8f241be2675919fa98ecb63412f2fc942f5f20c88c4d8080808080808080f8b180a0a238e2de476f69e828916ee949fa016831a9f85f7abea5e6fb9c76c7084f6549a0f003bc1503dd75793db204d5d19f839ab9c8e54a9c7128a5795eaa6356934278a0034190ef2b089ea213ad63a19bc7adf4f9d736709bcb40ed9fcd99434eb8b7aea09b679b3c1acba8e55556e440cd779d3971aa83e228e5ed7d9c7ea2e28a846c3ca0bf7a153b63f14195eee2d4060711103d33022335e7a6b0314a97dd79e72213878080808080808080808080f9072720b9072302f9071f018313ba70b9010000000100000000000000000000000000000000000000000000000000000000000000000000000200001000000000000000008000000000000000100002340000000000000000000000000008000000840000002000040000000100000000004000000000020000000000000000000800000000000040000080000010000000000000000000000000000000000000000000002000000080000400000000000040220000000100000000000000000000000000002000000000000000000000004000000002000000000401000000000000000000000000000000500040000060000010000000000000000010000000000000000000000000000000000020100000f90614f89c94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f884a042ef856c2602f37ce625d252830bed486c5c8e9a4de8aa36cc3d15f304eb662ba0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000180f8db94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f842a08c0bdd7bca83c4e0c810cbecf44bc544a9dc0b9f265664e31ce0ce85f07a052ba00000000000000000000000000000000000000000000000000000000000000001b88020d6874f78811219513411f98b112321c80322dcfa8218834d7a613b233d411220d6874f78811219513411f98b112321c80322dcfa8218834d7a613b233d411200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002f89c94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f884a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000180f89c94685a62777bfd7dc4c3a4c9b8db8a74e578d9f0a9f884a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000180f9021a940f6c05bbc7a40cf093cd01eb615ecf1b84253d0be1a08c5261668696ce22758910d05bab8f186d6eb247ceac2af2e82c7dc17669b036b901e0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248b00000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120d6874f78811219513411f98b112321c80322dcfa8218834d7a613b233d41120000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001f9013d940000000000000000000000000000000000001010f884a04dfe1bbbcf077ddc3e01291eea2d5c70c2b422b415d95645b9adcfd678cb1d63a00000000000000000000000000000000000000000000000000000000000001010a0000000000000000000000000514dadd7763d0d05a07ca7817915cb8c6ca8248ba0000000000000000000000000be188d6641e8b680743a4815dfa0f6208038960fb8a00000000000000000000000000000000000000000000000000009aacbc81255b50000000000000000000000000000000000000000000000000ec2d882527e66db00000000000000000000000000000000000000000000241462257002d4f20ebf0000000000000000000000000000000000000000000000000eb92db68a6c1126000000000000000000000000000000000000000000002414622f1ace9d04647482000504"
      }
  }
```
  - The function handles edge cases such as if your tokens are not in the same burn transaction or if you try to generate a proof after you have regained access of your tokens on `Ethereum`